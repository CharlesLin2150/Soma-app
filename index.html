<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="utf-8" />
  <title>Soma Daily</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    table { border-collapse: collapse; width: 100%; margin-bottom: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    .item { margin-bottom: 8px; }
    #score { font-size: 24px; color: darkblue; margin-top: 20px; }
  </style>
</head>
<body>
  <h2>Soma Daily è¨˜éŒ„</h2>
  <p>UIDï¼š<span id="uidSpan">å°šæœªç™»å…¥</span></p>

  <!-- ç™»å…¥è¡¨å–® -->
  <form id="loginForm" onsubmit="login(event)">
    Emailï¼š<input id="emailInput" type="email" placeholder="Email" required><br><br>
    å¯†ç¢¼ï¼š<input id="pwInput" type="password" placeholder="Password" required><br><br>
    <button type="submit">ç™»å…¥</button>
  </form>

  <!-- ä½¿ç”¨è€…ç™»å…¥å¾Œé¡¯ç¤ºå…§å®¹ -->
  <div id="mainContent" style="display: none;">
    <h3>ğŸ“… ä»Šæ—¥è¡Œç¨‹å®‰æ’</h3>
    <table id="scheduleTable">
      <tr><th>æ™‚é–“</th><th>æ´»å‹•</th></tr>
    </table>

    <h3>ğŸ¯ æ¯æ—¥æŒ‘æˆ°ä»»å‹™</h3>
    <form id="taskForm">
      <div class="item"><input type="checkbox" name="task" value="åƒæ—©é¤"> åƒæ—©é¤</div>
      <div class="item"><input type="checkbox" name="task" value="å–æ°´"> å–æ°´</div>
      <div class="item"><input type="checkbox" name="task" value="æ›¬å¤ªé™½"> æ›¬å¤ªé™½</div>
      <div class="item"><input type="checkbox" name="task" value="é‡é«”é‡"> é‡é«”é‡</div>
      <div class="item"><input type="checkbox" name="task" value="é‹å‹•"> é‹å‹•</div>
      <div class="item"><input type="checkbox" name="task" value="æ´—æ¾¡"> æ´—æ¾¡</div>
      <div class="item"><input type="checkbox" name="task" value="åˆ·ç‰™"> åˆ·ç‰™</div>
      <div class="item"><input type="checkbox" name="task" value="å†¥æƒ³"> å†¥æƒ³</div>
      <div class="item"><input type="checkbox" name="task" value="é–±è®€"> é–±è®€</div>
      <div class="item"><input type="checkbox" name="task" value="æœè—¥"> æœè—¥</div>
      <div class="item"><input type="checkbox" name="task" value="å¯«æ—¥è¨˜"> å¯«æ—¥è¨˜</div>
      <div class="item"><input type="checkbox" name="task" value="æ‰“æƒ"> æ‰“æƒ</div>
      <div class="item"><input type="checkbox" name="task" value="èˆ‡äººäº’å‹•"> èˆ‡äººäº’å‹•</div>
      <button type="button" onclick="calculateScore()">è¨ˆç®—åˆ†æ•¸</button>
    </form>

    <div id="score">ä»Šæ—¥å¾—åˆ†ï¼š0.0</div>
  </div>

  <script type="module" src="./app.js"></script>

  <script>
    // è¡Œç¨‹è¡¨æ™‚é–“è‡ªå‹•ç”Ÿæˆ
    window.addEventListener("DOMContentLoaded", () => {
      const scheduleTable = document.getElementById("scheduleTable");
      for (let hour = 6; hour <= 22; hour++) {
        const row = document.createElement("tr");
        const timeCell = document.createElement("td");
        const activityCell = document.createElement("td");
        timeCell.textContent = `${hour}:00`;
        activityCell.innerHTML = `<input type="text" name="schedule-${hour}" placeholder="å¡«å¯«æ´»å‹•">`;
        row.appendChild(timeCell);
        row.appendChild(activityCell);
        scheduleTable.appendChild(row);
      }
    });

    // æ¨¡æ“¬ç™»å…¥ï¼ˆé€™é‚Šä½ å¯ä»¥æ›¿æ›æˆ Firebase çš„ç™»å…¥é©—è­‰ï¼‰
    function login(event) {
      event.preventDefault();
      const email = document.getElementById("emailInput").value;
      const pw = document.getElementById("pwInput").value;
      // æ¨¡æ“¬ç™»å…¥æˆåŠŸ
      document.getElementById("uidSpan").textContent = email;
      document.getElementById("loginForm").style.display = "none";
      document.getElementById("mainContent").style.display = "block";
    }

    // åˆ†æ•¸è¨ˆç®—
    function calculateScore() {
      const form = document.getElementById("taskForm");
      const checkboxes = form.querySelectorAll('input[type="checkbox"]');
      let score = 0.0;

      const minusTasks = ["æœè—¥", "å¯«æ—¥è¨˜", "èˆ‡äººäº’å‹•"];

      checkboxes.forEach((checkbox) => {
        if (checkbox.checked) {
          score += 0.1;
        }
      });

      minusTasks.forEach((task) => {
        const checkbox = Array.from(checkboxes).find(cb => cb.value === task);
        if (!checkbox.checked) {
          score -= 0.1;
        }
      });

      score = Math.max(0, parseFloat(score.toFixed(1)));
      document.getElementById("score").textContent = `ä»Šæ—¥å¾—åˆ†ï¼š${score}`;
    }
  </script>
</body>
</html>